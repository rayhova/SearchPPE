!function(){"use strict";var e;(e=window).FWP=e.FWP||{},e.FWP.hooks=e.FWP.hooks||new function(){function e(e,t,a,o){var c,s,i;if(n[e][t])if(a)if(c=n[e][t],o)for(i=c.length;i--;)(s=c[i]).callback===a&&s.context===o&&c.splice(i,1);else for(i=c.length;i--;)c[i].callback===a&&c.splice(i,1);else n[e][t]=[]}function t(e,t,a,o,c){var s={callback:a,priority:o,context:c},i=n[e][t];i?(i.push(s),i=function(e){for(var t,a,o,c=1,n=e.length;c<n;c++){for(t=e[c],a=c;(o=e[a-1])&&o.priority>t.priority;)e[a]=e[a-1],--a;e[a]=t}return e}(i)):i=[s],n[e][t]=i}function a(e,t,a){var o,c,s=n[e][t];if(!s)return"filters"===e&&a[0];if(c=s.length,"filters"===e)for(o=0;o<c;o++)a[0]=s[o].callback.apply(s[o].context,a);else for(o=0;o<c;o++)s[o].callback.apply(s[o].context,a);return"filters"!==e||a[0]}var o=Array.prototype.slice,c={removeFilter:function(t,a){return"string"==typeof t&&e("filters",t,a),c},applyFilters:function(){var e=o.call(arguments),t=e.shift();return"string"==typeof t?a("filters",t,e):c},addFilter:function(e,a,o,n){return"string"==typeof e&&"function"==typeof a&&t("filters",e,a,o=parseInt(o||10,10),n),c},removeAction:function(t,a){return"string"==typeof t&&e("actions",t,a),c},doAction:function(){var e=o.call(arguments),t=e.shift();return"string"==typeof t&&a("actions",t,e),c},addAction:function(e,a,o,n){return"string"==typeof e&&"function"==typeof a&&t("actions",e,a,o=parseInt(o||10,10),n),c}},n={actions:{},filters:{}};return c},window.FWP=window.FWP||{},function(e){function t(e){return void 0!==e}var a={facets:{},template:null,settings:{},is_reset:!1,is_refresh:!1,is_bfcache:!1,auto_refresh:!0,soft_refresh:!1,frozen_facets:{},facet_type:{},loaded:!1,jqXHR:!1,extras:{},helper:{},paged:1};for(var o in a)t(FWP[o])||(FWP[o]=a[o]);e(window).on("load",(function(){setTimeout((function(){e(window).on("popstate",(function(){FWP.is_bfcache&&(FWP.loaded=!1),!FWP.loaded&&!FWP.is_bfcache||FWP.is_refresh||(FWP.is_popstate=!0,FWP.refresh(),FWP.is_popstate=!1)})),e(document).on("click",'a[href^="#"]',(function(e){e.preventDefault()}))}),0)})),FWP.helper.get_url_var=function(e){e=FWP_JSON.prefix+e;for(var t=FWP.build_query_string().split("&"),a=0;a<t.length;a++){var o=t[a].split("=");if(o[0]===e)return o[1]}return!1},FWP.helper.debounce=function(e,t){var a;return function(){var o=this,c=arguments,n=function(){a=null,e.apply(o,c)};clearTimeout(a),a=setTimeout(n,t)}},FWP.helper.serialize=function(e,a){var o=[];a=t(a)?a:"";for(var c in e)""!=e[c]&&o.push(a+encodeURIComponent(c)+"="+encodeURIComponent(e[c]));return o.join("&")},FWP.helper.escape_html=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return t[e]})).trim()},FWP.helper.detect_loop=function(e){for(var t=null,a=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,(function(){return NodeFilter.FILTER_ACCEPT}),!1);t=a.nextNode();)if(8===t.nodeType&&"fwp-loop"===t.nodeValue)return t.parentNode;return!1},FWP.autoload=function(){FWP.auto_refresh&&!FWP.is_refresh&&FWP.refresh()},FWP.refresh=function(){FWP.is_refresh=!0,FWP.is_reset||FWP.parse_facets(),FWP.loaded||FWP.load_from_hash(),e(document).trigger("facetwp-refresh"),FWP.loaded&&!FWP.is_popstate&&FWP.set_hash(),FWP.loaded||FWP.is_bfcache||!t(FWP_JSON.preload_data)?FWP.fetch_data():FWP.render(FWP_JSON.preload_data),e.each(FWP.frozen_facets,(function(e,t){"hard"!==t&&delete FWP.frozen_facets[e]})),FWP.paged=1,FWP.soft_refresh=!1,FWP.is_refresh=!1,FWP.is_reset=!1},FWP.parse_facets=function(){FWP.facets={},e(".facetwp-facet").each((function(){var t=e(this),a=t.attr("data-name"),o=t.attr("data-type");FWP.facet_type[a]=o,FWP.hooks.doAction("facetwp/refresh/"+o,t,a),FWP.loading_handler({element:t,facet_name:a,facet_type:o})})),1<FWP.paged&&(FWP.facets.paged=FWP.paged),FWP.extras.per_page&&"default"!==FWP.extras.per_page&&(FWP.facets.per_page=FWP.extras.per_page),FWP.extras.sort&&"default"!==FWP.extras.sort&&(FWP.facets.sort=FWP.extras.sort)},FWP.loading_handler=function(t){if(!FWP.loaded){var a=t.element;e(document).on("facetwp-refresh",(function(){a.addClass("is-loading"),a.prepend('<div class="facetwp-overlay">'),a.find(".facetwp-overlay").css({width:a.width(),height:a.height()})})),e(document).on("facetwp-loaded",(function(){a.removeClass("is-loading"),a.find(".facetwp-overlay").remove()}))}},FWP.build_query_string=function(){var t="",a=[],o=window.location.search.replace("?","").split("&");e.each(o,(function(e,t){0!==t.split("=")[0].indexOf(FWP_JSON.prefix)&&a.push(t)})),a=a.join("&");var c=FWP.helper.serialize(FWP.facets,FWP_JSON.prefix);return""!==a&&(t+=a),""!==c&&(t+=(""!==a?"&":"")+c),t},FWP.set_hash=function(){var e=FWP.build_query_string();""!==e&&(e="?"+e),history.pushState&&history.pushState(null,null,window.location.pathname+e),FWP_HTTP.get={},window.location.search.replace("?","").split("&").forEach((function(e){var t=e.split("=");FWP_HTTP.get[t[0]]=t[1]}))},FWP.load_from_hash=function(){var a=[],o=window.location.search.replace("?","").split("&");e.each(o,(function(e,t){0===t.split("=")[0].indexOf(FWP_JSON.prefix)&&a.push(t.replace(FWP_JSON.prefix,""))})),a=a.join("&"),e.each(FWP.facets,(function(e){FWP.facets[e]=[]})),FWP.paged=1,FWP.extras.sort="default",""!==a&&(a=a.split("&"),e.each(a,(function(e,a){var o=a.split("=")[0],c=a.split("=")[1];if("paged"===o)FWP.paged=c;else if("per_page"===o||"sort"===o)FWP.extras[o]=c;else if(""!==c){var n=t(FWP.facet_type[o])?FWP.facet_type[o]:"";FWP.facets[o]="search"===n||"autocomplete"===n?decodeURIComponent(c):decodeURIComponent(c).split(",")}})))},FWP.build_post_data=function(){return{facets:JSON.stringify(FWP.facets),frozen_facets:FWP.frozen_facets,http_params:FWP_HTTP,template:FWP.template,extras:FWP.extras,soft_refresh:FWP.soft_refresh?1:0,is_bfcache:FWP.is_bfcache?1:0,first_load:FWP.loaded?0:1,paged:FWP.paged}},FWP.fetch_data=function(){FWP.jqXHR&&4!==FWP.jqXHR.readyState&&FWP.jqXHR.abort();var t="wp"===FWP.template?document.URL:FWP_JSON.ajaxurl,a={type:"POST",dataType:"text",data:{action:"facetwp_refresh",data:FWP.build_post_data()},success:function(t){try{var a=e.parseJSON(t);FWP.render(a)}catch(n){var o=t.indexOf('{"facets');if(-1<o){var c=t.substr(0,o);a=e.parseJSON(t.substr(o));FWP.render(a),console.log(c)}else e(".facetwp-template").text("FacetWP was unable to auto-detect the post listing"),console.log(t)}}};a=FWP.hooks.applyFilters("facetwp/ajax_settings",a),FWP.jqXHR=e.ajax(t,a)},FWP.render=function(a){if("wp"!==FWP.template&&""!==a.template||FWP.loaded||FWP.is_bfcache){s=a.template;if("wp"===FWP.template){var o=e(a.template).find(".facetwp-template");if(1>o.length){var c=document.createElement("div");c.innerHTML=a.template;var n=FWP.helper.detect_loop(c);n&&(o=e(n).addClass("facetwp-template"))}if(0<o.length)s=o.html();else s=FWP_JSON.no_results_text}}else var s=!1;!1!==s&&(FWP.hooks.applyFilters("facetwp/template_html",!1,{response:a,html:s})||e(".facetwp-template").html(s)),e.each(a.facets,(function(t,a){e(".facetwp-facet-"+t).html(a)})),t(a.counts)&&e(".facetwp-counts").html(a.counts),t(a.pager)&&e(".facetwp-pager").html(a.pager),t(a.per_page)&&(e(".facetwp-per-page").html(a.per_page),"default"!==FWP.extras.per_page&&e(".facetwp-per-page-select").val(FWP.extras.per_page)),t(a.sort)&&(e(".facetwp-sort").html(a.sort),e(".facetwp-sort-select").val(FWP.extras.sort)),e.each(a.settings,(function(e,t){FWP.settings[e]=t})),"function"==typeof WPPlaylistView&&e(".facetwp-template .wp-playlist").each((function(){return new WPPlaylistView({el:this})})),e(document).trigger("facetwp-loaded"),FWP.hooks.doAction("facetwp/loaded"),FWP.is_bfcache=!0,FWP.loaded=!0},FWP.reset=function(a){FWP.parse_facets;var o={};"string"==typeof a?o[a]="":Array.isArray(a)?e.each(a,(function(e,t){o[t]=""})):"object"==typeof a&&a&&(o=a);var c=Object.keys(o).length<1;e.each(FWP.facets,(function(e,a){var n=t(o[e]),s=Array.isArray(a)?a:[a];if(n&&-1<s.indexOf(o[e])){var i=s.indexOf(o[e]);s.splice(i,1),FWP.facets[e]=s}n&&(s.length<1||""===o[e])&&delete FWP.frozen_facets[e],(c||n&&""===o[e])&&(FWP.facets[e]=[])})),c&&(FWP.extras.sort="default",FWP.frozen_facets={}),FWP.hooks.doAction("facetwp/reset"),FWP.is_reset=!0,FWP.refresh()},FWP.init=function(){if(0<e(".facetwp-sort").length&&(FWP.extras.sort="default"),0<e(".facetwp-pager").length&&(FWP.extras.pager=!0),0<e(".facetwp-per-page").length&&(FWP.extras.per_page="default"),0<e(".facetwp-counts").length&&(FWP.extras.counts=!0),0<e(".facetwp-selections").length&&(FWP.extras.selections=!0),!(e(".facetwp-template").length>0)){var a=FWP.helper.detect_loop(document.body);if(!a)return;e(a).addClass("facetwp-template")}var o=e(".facetwp-template:first");FWP.template=o.is("[data-name]")?o.attr("data-name"):"wp",0<o.find(".facetwp-facet").length&&console.error('Facets should not be inside the "facetwp-template" container'),FWP.hooks.doAction("facetwp/ready"),FWP.extras.selections&&FWP.hooks.addAction("facetwp/loaded",(function(){var a="";e.each(FWP.facets,(function(o,c){if(c.length<1||!t(FWP.settings.labels[o]))return!0;var n=c,s=e(".facetwp-facet-"+o).attr("data-type");"string"==typeof(n=FWP.hooks.applyFilters("facetwp/selections/"+s,n,{el:e(".facetwp-facet-"+o),selected_values:n}))?n=[{value:"",label:n}]:t(n[0].label)||(n=[{value:"",label:n[0]}]);var i="";e.each(n,(function(e,t){i+='<span class="facetwp-selection-value" data-value="'+t.value+'">'+FWP.helper.escape_html(t.label)+"</span>"})),a+='<li data-facet="'+o+'"><span class="facetwp-selection-label">'+FWP.settings.labels[o]+":</span> "+i+"</li>"})),""!==a&&(a="<ul>"+a+"</ul>"),e(".facetwp-selections").html(a)})),e(document).on("click",".facetwp-selections .facetwp-selection-value",(function(){if(!FWP.is_refresh){var t=e(this).closest("li").attr("data-facet"),a=e(this).attr("data-value");if(""!=a){var o={};o[t]=a,FWP.reset(o)}else FWP.reset(t)}})),e(document).on("click",".facetwp-page[data-page]",(function(){e(".facetwp-page").removeClass("active"),e(this).addClass("active"),FWP.paged=e(this).attr("data-page"),FWP.soft_refresh=!0,FWP.refresh()})),e(document).on("change",".facetwp-per-page-select",(function(){FWP.extras.per_page=e(this).val(),FWP.soft_refresh=!0,FWP.autoload()})),e(document).on("change",".facetwp-sort-select",(function(){FWP.extras.sort=e(this).val(),FWP.soft_refresh=!0,FWP.autoload()})),FWP.refresh()},e((function(){FWP.init()}))}(jQuery),function(e){FWP.logic=FWP.logic||{},e.fn.pVal=function(){var t=e(this).eq(0).val();return t===e(this).attr("placeholder")?"":t};var t=!1;FWP.hooks.addAction("facetwp/refresh/autocomplete",(function(e,t){var a=e.find(".facetwp-autocomplete").val()||"";FWP.facets[t]=a})),e(document).on("facetwp-loaded",(function(){e(".facetwp-autocomplete:not(.ready)").each((function(){var a=e(this),o=a.closest(".facetwp-facet").attr("data-name"),c=FWP.build_post_data(),n=JSON.parse(JSON.stringify(FWP.facets));n[o]="",c.facets=JSON.stringify(n);var s=FWP.hooks.applyFilters("facetwp/set_options/autocomplete",{serviceUrl:"wp"===FWP.template?document.URL:FWP_JSON.ajaxurl,type:"POST",minChars:3,deferRequestBy:200,showNoSuggestionNotice:!0,triggerSelectOnValidInput:!1,noSuggestionNotice:FWP_JSON.no_results,onSelect:function(){t=!0,FWP.autoload()},params:{action:"facetwp_autocomplete_load",facet_name:o,data:c}},{facet_name:o});a.autocomplete(s),a.addClass("ready")}))})),e(document).on("keyup",".facetwp-autocomplete",(function(e){13!==e.which||t||FWP.autoload(),t&&(t=!1)})),e(document).on("click",".facetwp-autocomplete-update",(function(){FWP.autoload()})),FWP.hooks.addAction("facetwp/refresh/checkboxes",(function(t,a){var o=[];t.find(".facetwp-checkbox.checked").each((function(){o.push(e(this).attr("data-value"))})),FWP.facets[a]=o})),FWP.hooks.addFilter("facetwp/selections/checkboxes",(function(t,a){var o=[];return e.each(a.selected_values,(function(e,t){var c=a.el.find('.facetwp-checkbox[data-value="'+t+'"]').clone();c.find(".facetwp-counter").remove(),c.find(".facetwp-expand").remove(),o.push({value:t,label:c.text()})})),o})),e(document).on("click",".facetwp-type-checkboxes .facetwp-expand",(function(t){var a=e(this).parent(".facetwp-checkbox").next(".facetwp-depth");a.toggleClass("visible");var o=a.hasClass("visible")?FWP_JSON.collapse:FWP_JSON.expand;e(this).html(o),t.stopPropagation()})),e(document).on("click",".facetwp-type-checkboxes .facetwp-checkbox:not(.disabled)",(function(){e(this).toggleClass("checked"),FWP.autoload()})),e(document).on("click",".facetwp-type-checkboxes .facetwp-toggle",(function(){var t=e(this).closest(".facetwp-facet");t.find(".facetwp-toggle").toggleClass("facetwp-hidden"),t.find(".facetwp-overflow").toggleClass("facetwp-hidden")})),e(document).on("facetwp-loaded",(function(){e(".facetwp-type-checkboxes .facetwp-overflow").each((function(){var t=e(this).find(".facetwp-checkbox").length,a=e(this).siblings(".facetwp-toggle:first");a.text(a.text().replace("{num}",t))})),e(".facetwp-type-checkboxes").each((function(){var t=e(this),a=t.attr("data-name");Object.keys(FWP.settings).length<1||("yes"===FWP.settings[a].show_expanded&&t.find(".facetwp-depth").addClass("visible"),1>t.find(".facetwp-expand").length&&(t.find(".facetwp-checkbox.checked").each((function(){e(this).parents(".facetwp-depth").addClass("visible")})),t.find(".facetwp-depth").each((function(){var t=e(this).hasClass("visible")?"collapse":"expand";e(this).prev(".facetwp-checkbox").append(' <span class="facetwp-expand">'+FWP_JSON[t]+"</span>")}))))}))})),FWP.hooks.addAction("facetwp/refresh/radio",(function(t,a){var o=[];t.find(".facetwp-radio.checked").each((function(){var t=e(this).attr("data-value");""!==t&&o.push(t)})),FWP.facets[a]=o})),FWP.hooks.addFilter("facetwp/selections/radio",(function(t,a){var o=[];return e.each(a.selected_values,(function(e,t){var c=a.el.find('.facetwp-radio[data-value="'+t+'"]').clone();c.find(".facetwp-counter").remove(),o.push({value:t,label:c.text()})})),o})),e(document).on("click",".facetwp-type-radio .facetwp-radio:not(.disabled)",(function(){var t=e(this).hasClass("checked");e(this).closest(".facetwp-facet").find(".facetwp-radio").removeClass("checked"),t||e(this).addClass("checked"),FWP.autoload()})),FWP.hooks.addAction("facetwp/refresh/date_range",(function(e,t){var a=e.find(".facetwp-date-min").pVal()||"",o=e.find(".facetwp-date-max").pVal()||"";FWP.facets[t]=""!==a||""!==o?[a,o]:[]})),FWP.hooks.addFilter("facetwp/selections/date_range",(function(e,t){var a=t.selected_values,o=t.el,c="";return""!==a[0]&&(c+=" "+FWP_JSON.datepicker.fromText+" "+o.find(".facetwp-date-min").next().val()),""!==a[1]&&(c+=" "+FWP_JSON.datepicker.toText+" "+o.find(".facetwp-date-max").next().val()),c})),e(document).on("facetwp-loaded",(function(){var t=e('.facetwp-type-date_range .facetwp-date:not(".ready, .flatpickr-alt")');if(0!==t.length){var a={altInput:!0,altInputClass:"flatpickr-alt",altFormat:"Y-m-d",disableMobile:!0,locale:FWP_JSON.datepicker.locale,onChange:function(){FWP.autoload()},onReady:function(t,a,o){var c='<div class="flatpickr-clear">'+FWP_JSON.datepicker.clearText+"</div>";e(c).on("click",(function(){o.clear(),o.close()})).appendTo(e(o.calendarContainer))}};t.each((function(){var t=e(this),o=t.closest(".facetwp-facet").attr("data-name");a.altFormat=FWP.settings[o].format;var c=FWP.hooks.applyFilters("facetwp/set_options/date_range",a,{facet_name:o,element:t});new flatpickr(this,c),t.addClass("ready")}))}})),FWP.hooks.addAction("facetwp/refresh/dropdown",(function(e,t){var a=e.find(".facetwp-dropdown").val();FWP.facets[t]=a?[a]:[]})),FWP.hooks.addFilter("facetwp/selections/dropdown",(function(e,t){return t.el.find(".facetwp-dropdown option:selected").text().replace(/\(\d+\)$/,"")})),e(document).on("change",".facetwp-type-dropdown select",(function(){var t=e(this).closest(".facetwp-facet"),a=t.attr("data-name");""!==t.find(":selected").val()&&(FWP.frozen_facets[a]="soft"),FWP.autoload()})),FWP.hooks.addAction("facetwp/refresh/fselect",(function(t,a){var o=t.find("select").val();null===o||""===o?o=[]:!1===e.isArray(o)&&(o=[o]),FWP.facets[a]=o})),FWP.hooks.addFilter("facetwp/selections/fselect",(function(t,a){var o=[];return e.each(a.selected_values,(function(e,t){var c=a.el.find('.facetwp-dropdown option[value="'+t+'"]').text();o.push({value:t,label:c.replace(/{{(.*?)}}/,"")})})),o})),e(document).on("facetwp-loaded",(function(){e(".facetwp-type-fselect select:not(.ready)").each((function(){var t=e(this).closest(".facetwp-facet").attr("data-name"),a=FWP.settings[t];a.optionFormatter=function(e){return e=(e=e.replace(/{{/g,'<span class="facetwp-counter">')).replace(/}}/g,"<span>")};var o=FWP.hooks.applyFilters("facetwp/set_options/fselect",a,{facet_name:t});e(this).fSelect(o),e(this).addClass("ready")})),e(".fs-wrap.fs-disabled").removeClass("fs-disabled")})),e(document).on("fs:changed",(function(t,a){if(e(a).closest(".facetwp-facet").length>0&&a.classList.contains("multiple")){var o=e(a).closest(".facetwp-facet").attr("data-name");"or"===FWP.settings[o].operator&&(FWP.frozen_facets[o]="soft",FWP.auto_refresh&&e(a).addClass("fs-disabled")),FWP.autoload()}})),e(document).on("fs:closed",(function(t,a){e(a).closest(".facetwp-facet").length>0&&!a.classList.contains("multiple")&&FWP.autoload()})),FWP.hooks.addAction("facetwp/refresh/hierarchy",(function(t,a){var o=[];t.find(".facetwp-link.checked").each((function(){o.push(e(this).attr("data-value"))})),FWP.facets[a]=o})),FWP.hooks.addFilter("facetwp/selections/hierarchy",(function(e,t){return t.el.find(".facetwp-link.checked").text()})),e(document).on("click",".facetwp-type-hierarchy .facetwp-link",(function(){e(this).closest(".facetwp-facet").find(".facetwp-link").removeClass("checked"),""!==e(this).attr("data-value")&&e(this).addClass("checked"),FWP.autoload()})),e(document).on("click",".facetwp-type-hierarchy .facetwp-toggle",(function(){var t=e(this).closest(".facetwp-facet");t.find(".facetwp-toggle").toggleClass("facetwp-hidden"),t.find(".facetwp-overflow").toggleClass("facetwp-hidden")})),FWP.hooks.addAction("facetwp/refresh/number_range",(function(e,t){var a=e.find(".facetwp-number-min").val()||"",o=e.find(".facetwp-number-max").val()||"";FWP.facets[t]=""!==a||""!==o?[a,o]:[]})),FWP.hooks.addFilter("facetwp/selections/number_range",(function(e,t){return t.selected_values[0]+" - "+t.selected_values[1]})),e(document).on("click",".facetwp-type-number_range .facetwp-submit",(function(){FWP.refresh()})),e(document).on("facetwp-loaded",(function(){var t=e(".facetwp-location");t.length<1||(FWP.loaded||(window.FWP_MAP=window.FWP_MAP||{},FWP_MAP.sessionToken=new google.maps.places.AutocompleteSessionToken,FWP_MAP.autocompleteService=new google.maps.places.AutocompleteService,FWP_MAP.placesService=new google.maps.places.PlacesService(document.createElement("div")),e(document).on("input",".facetwp-location",FWP.helper.debounce((function(){var t=e(this).val(),a=e(this).closest(".facetwp-facet");if(""==t||t.length<FWP_JSON.proximity.minLength)a.find(".location-results").addClass("facetwp-hidden");else{var o=FWP_JSON.proximity.autocomplete_options;o.sessionToken=FWP_MAP.sessionToken,o.input=t,FWP_MAP.autocompleteService.getPredictions(o,(function(e,t){if(t===google.maps.places.PlacesServiceStatus.OK){var o="";e.forEach((function(e,t){o+='<div class="location-result'+(0===t?" active":"")+'" data-id="'+e.place_id+'" data-index="'+t+'">',o+='<span class="result-main">'+e.structured_formatting.main_text+"</span> ",o+='<span class="result-secondary">'+e.structured_formatting.secondary_text+"</span>",o+='<span class="result-description facetwp-hidden">'+e.description+"</span>",o+="</div>"})),a.find(".location-results").html(o).removeClass("facetwp-hidden")}}))}}),FWP_JSON.proximity.queryDelay))),t.each((function(t,a){var o=e(this);o.closest(".location-wrap").length<1&&(0===t&&(o.attr("id","facetwp-location"),o.closest(".facetwp-facet").find(".facetwp-radius").attr("id","facetwp-radius")),o.wrap('<span class="location-wrap"></span>'),o.before('<i class="locate-me"></i>'),o.after('<div class="location-results facetwp-hidden"></div>')),o.trigger("keyup")})))})),e(document).on("click",".location-result",(function(){var t=e(this).closest(".facetwp-facet"),a=e(this).attr("data-id"),o=e(this).find(".result-description").text();FWP_MAP.placesService.getDetails({placeId:a,fields:["geometry"]},(function(e,a){a===google.maps.places.PlacesServiceStatus.OK&&(t.find(".facetwp-lat").val(e.geometry.location.lat()),t.find(".facetwp-lng").val(e.geometry.location.lng()),FWP.autoload())})),e(".facetwp-location").val(o),e(".location-results").addClass("facetwp-hidden")})),e(document).on("click",".facetwp-type-proximity .locate-me",(function(t){var a=e(this),o=a.closest(".facetwp-facet"),c=o.find(".facetwp-location"),n=o.find(".facetwp-lat"),s=o.find(".facetwp-lng");if(a.hasClass("f-reset"))return n.val(""),n.val(""),c.val(""),void FWP.autoload();a.addClass("f-loading"),navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,i=e.coords.longitude;n.val(t),s.val(i);var r=new google.maps.Geocoder,l={lat:parseFloat(t),lng:parseFloat(i)};r.geocode({location:l},(function(e,t){t===google.maps.GeocoderStatus.OK?c.val(e[0].formatted_address):c.val("Your location"),a.addClass("f-reset"),FWP.autoload()})),a.removeClass("f-loading"),FWP.hooks.doAction("facetwp/geolocation/success",{facet:o,position:e})}),(function(e){a.removeClass("f-loading"),FWP.hooks.doAction("facetwp/geolocation/error",{facet:o,error:e})}))})),e(document).on("keyup",".facetwp-location",(function(t){var a=e(this).closest(".facetwp-facet");if(a.find(".locate-me").toggleClass("f-reset",""!==e(this).val()),38===t.which||40===t.which||13===t.which)var o=parseInt(a.find(".location-result.active").attr("data-index")),c=parseInt(a.find(".location-result:last").attr("data-index"));if(38===t.which){var n=0<o?o-1:c;a.find(".location-result.active").removeClass("active"),a.find(".location-result[data-index="+n+"]").addClass("active")}else if(40===t.which){n=o<c?o+1:0;a.find(".location-result.active").removeClass("active"),a.find(".location-result[data-index="+n+"]").addClass("active")}else 13===t.which&&a.find(".location-result.active").trigger("click")})),e(document).on("click focusout",(function(t){var a=e(t.target);(a.closest(".location-wrap").length<1||a.hasClass("f-reset"))&&e(".location-results").addClass("facetwp-hidden")})),e(document).on("focusin",".facetwp-location",(function(){var t=e(this).closest(".facetwp-facet");""!=e(this).val()&&t.find(".location-results").removeClass("facetwp-hidden")})),e(document).on("change",".facetwp-radius",(function(){""!==e(this).closest(".facetwp-facet").find(".facetwp-location").val()&&FWP.autoload()})),e(document).on("input",".facetwp-radius-slider",(function(t){e(this).closest(".facetwp-facet").find(".facetwp-radius-dist").text(t.target.value)})),FWP.hooks.addAction("facetwp/refresh/proximity",(function(e,t){var a=e.find(".facetwp-lat").val(),o=e.find(".facetwp-lng").val(),c=e.find(".facetwp-radius").val(),n=encodeURIComponent(e.find(".facetwp-location").val());FWP.frozen_facets[t]="hard",FWP.facets[t]=""!==a&&void 0!==a?[a,o,c,n]:[]})),FWP.hooks.addFilter("facetwp/selections/proximity",(function(e,t){return FWP_JSON.proximity.clearText})),FWP.logic.search={delay_refresh:FWP.helper.debounce((function(e){FWP.frozen_facets[e]="soft",FWP.autoload()}),500)},FWP.hooks.addAction("facetwp/refresh/search",(function(e,t){var a=e.find(".facetwp-search");FWP.facets[t]=a.val()||""})),e(document).on("keyup",".facetwp-type-search .facetwp-search",(function(t){var a=e(this).closest(".facetwp-facet").attr("data-name");void 0!==FWP.settings[a]&&("yes"===FWP.settings[a].auto_refresh?FWP.logic.search.delay_refresh(a):13===t.keyCode&&FWP.autoload())})),e(document).on("click",".facetwp-type-search .facetwp-btn",(function(){FWP.autoload()})),FWP.hooks.addAction("facetwp/refresh/slider",(function(e,t){FWP.facets[t]=[],void 0!==FWP.frozen_facets[t]&&void 0!==e.find(".facetwp-slider")[0].noUiSlider&&(FWP.facets[t]=e.find(".facetwp-slider")[0].noUiSlider.get(),e.find(".facetwp-slider")[0].setAttribute("disabled",!0))})),FWP.hooks.addAction("facetwp/loaded",(function(){e(".facetwp-type-slider .facetwp-slider").removeAttr("disabled")})),FWP.hooks.addAction("facetwp/set_label/slider",(function(e){var t=e.attr("data-name"),a=FWP.settings[t].lower,o=FWP.settings[t].upper,c=FWP.settings[t].format,n={decimal_separator:FWP.settings[t].decimal_separator,thousands_separator:FWP.settings[t].thousands_separator};if(a===o)var s=FWP.settings[t].prefix+nummy(a).format(c,n)+FWP.settings[t].suffix;else s=FWP.settings[t].prefix+nummy(a).format(c,n)+FWP.settings[t].suffix+" &mdash; "+FWP.settings[t].prefix+nummy(o).format(c,n)+FWP.settings[t].suffix;e.find(".facetwp-slider-label").html(s)})),FWP.hooks.addFilter("facetwp/selections/slider",(function(e,t){return t.el.find(".facetwp-slider-label").text()})),e(document).on("facetwp-loaded",(function(){e(".facetwp-type-slider .facetwp-slider:not(.ready)").each((function(){var t=e(this).closest(".facetwp-facet"),a=t.attr("data-name"),o=FWP.settings[a];if(!1!==FWP.helper.get_url_var(a)&&(FWP.frozen_facets[a]="hard"),void 0===e(this).data("options")&&null!==FWP.settings[a].start[0]){if(parseFloat(o.range.min)>=parseFloat(o.range.max))return FWP.settings[a].lower=o.range.min,FWP.settings[a].upper=o.range.max,void FWP.hooks.doAction("facetwp/set_label/slider",t);var c=FWP.hooks.applyFilters("facetwp/set_options/slider",{range:o.range,start:o.start,step:parseFloat(o.step),connect:!0},{facet_name:a}),n=e(this)[0];noUiSlider.create(n,c),n.noUiSlider.on("update",(function(e,o){FWP.settings[a].lower=e[0],FWP.settings[a].upper=e[1],FWP.hooks.doAction("facetwp/set_label/slider",t)})),n.noUiSlider.on("set",(function(){FWP.frozen_facets[a]="hard",FWP.autoload()})),e(this).addClass("ready")}})),e(".facetwp-type-slider").each((function(){var t=e(this).attr("data-name"),a=e(this).find(".facetwp-slider-reset");e.isEmptyObject(FWP.facets[t])?a.hide():a.show()}))})),e(document).on("click",".facetwp-type-slider .facetwp-slider-reset",(function(){var t=e(this).closest(".facetwp-facet").attr("data-name");FWP.reset(t)})),FWP.hooks.addAction("facetwp/refresh/rating",(function(t,a){var o=[];t.find(".facetwp-star.selected").each((function(){var t=e(this).attr("data-value");""!=t&&o.push(t)})),FWP.facets[a]=o})),e(document).on("mouseover",".facetwp-star",(function(){var t=e(this).closest(".facetwp-facet");if(e(this).hasClass("selected"))t.find(".facetwp-star-label").text(FWP_JSON.rating.Undo);else{var a="5"==e(this).attr("data-value")?"":FWP_JSON.rating["& up"];t.find(".facetwp-star-label").text(a),t.find(".facetwp-counter").text("("+e(this).data("counter")+")")}})),e(document).on("mouseout",".facetwp-star",(function(){var t=e(this).closest(".facetwp-facet");t.find(".facetwp-star-label").text(""),t.find(".facetwp-counter").text("")})),e(document).on("click",".facetwp-star",(function(){var t=e(this).closest(".facetwp-facet"),a=e(this).hasClass("selected");t.find(".facetwp-star").removeClass("selected"),a||e(this).addClass("selected"),FWP.autoload()})),FWP.hooks.addAction("facetwp/refresh/pager",(function(e,t){FWP.facets[t]=[]})),FWP.hooks.addFilter("facetwp/template_html",(function(t,a){return FWP.is_load_more?(FWP.is_load_more=!1,0<e(".fwpl-layout").length?e(".fwpl-layout").append(e(a.html).html()):e(".facetwp-template").append(a.html),!0):t})),e(document).on("click",".facetwp-load-more",(function(){var t=e(this).attr("data-loading");e(this).html(t),FWP.is_load_more=!0,FWP.load_more_paged+=1,FWP.paged=FWP.load_more_paged,FWP.soft_refresh=!0,FWP.is_reset=!0,FWP.refresh()})),e(document).on("facetwp-loaded",(function(){var t=FWP.settings.pager.page<FWP.settings.pager.total_pages;e(".facetwp-load-more").toggle(t)})),e(document).on("facetwp-refresh",(function(){FWP.loaded&&FWP.is_load_more||(FWP.load_more_paged=1)}))}(jQuery)}();
